{
	"info": {
		"_postman_id": "22b0a63d-525f-46d8-849e-52d8ab735940",
		"name": "Integrity Checker From Sender",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Generate ",
			"item": [
				{
					"name": "old Way",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "login",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "4ea7a3c6-b27c-495c-aee6-3a21504af2f3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"backEndLogin\": true,\n    \"country\": \"US\",\n    \"language\": \"en\",\n    \"password\": \"admin\",\n    \"rememberMe\": false,\n    \"userId\": \"admin@dotcms.com\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/authentication",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"authentication"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "21e2edf9-3c61-425e-969b-e8f15a42414b",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "1b80dfe0-75dd-4a3b-9c40-d7baaf700c9a",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "12be9de1-6301-4b98-b93f-5a9b7c67cb8e",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0043830d-0afd-44e8-9e74-468207760cb3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create receiver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "541567fe-4319-432a-9de6-c7340a872a2b",
												"exec": [
													"receiverName = 'receiverName-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"receiverName\", receiverName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "a279d916-5a29-41b8-b828-78e2145d4da4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=true&serverName={{receiverName}}&environmentId={{environmentId}}&address=localhost&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "true"
												},
												{
													"key": "serverName",
													"value": "{{receiverName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "53d23de8-d273-49a7-b34f-943128b06f43",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "{{serverURL}}/api/v1/apitoken",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "96a5c7aa-beb2-41ea-a862-33668e7b20c1",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 1,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "invalid token",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "login",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b2676961-01c3-4713-a2cb-4f198b65cff8",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"backEndLogin\": true,\n    \"country\": \"US\",\n    \"language\": \"en\",\n    \"password\": \"admin\",\n    \"rememberMe\": false,\n    \"userId\": \"admin@dotcms.com\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/authentication",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"authentication"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "568c8c22-513f-47f4-bfee-d9b5f509af01",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "95a24783-479f-4653-bcc1-770d2e6d1ea4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "979d6dde-3fe4-4e5e-a31f-a99e873a67bc",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "cd79e3df-8419-4b83-a38c-96ac9407f0b4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create receiver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "21436084-f70d-491b-bdce-53399e80ac0b",
												"exec": [
													"receiverName = 'receiverName-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"receiverName\", receiverName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "3be8bb49-8015-45ae-88ae-204de07136b8",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=true&serverName={{receiverName}}&environmentId={{environmentId}}&address=localhost&authKey=invalid&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "true"
												},
												{
													"key": "serverName",
													"value": "{{receiverName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "authKey",
													"value": "invalid"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "785531ee-a1e6-41d9-a7ea-cd5741b01e0c",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "using JWT",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "489b8966-63c5-46bd-bfee-b8557694ecbf",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3d2f6477-2b75-4c45-a637-7f61f026b85d",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d6adea39-839c-44d1-aee2-1f72b2b261e1",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "d0e3fc34-7237-4f1a-80b2-f2bf7929f41e",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f9f8203a-b0d8-4f5c-b122-ed54bc812df4",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey={{token}}&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "{{token}}"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e819d05f-4986-4508-a7d8-33c1e141a049",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid Token",
							"item": [
								{
									"name": "login",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "98455b25-0842-494c-b98d-52458b0ea4e1",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"backEndLogin\": true,\n    \"country\": \"US\",\n    \"language\": \"en\",\n    \"password\": \"admin\",\n    \"rememberMe\": false,\n    \"userId\": \"admin@dotcms.com\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/authentication",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"authentication"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "473564a2-6bb0-4b64-9fe7-0282523bfc4b",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "5a17d4f8-bcda-4c96-a501-edec789cc349",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "6fd9edd3-be54-40f6-b47a-e6d37c47b71e",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "75c9d1a4-6bcb-4032-b675-dd495b4a9a65",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3f9c9298-b6ec-4618-97ff-bd4b257fb95d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "experied Token",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "85dca0a8-10ef-4035-b8d8-d8da558bf895",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"",
													"    eval(pm.collectionVariables.get(\"wait\"))(2);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "a7faa8f9-c33b-409a-a20e-f51d3a9ed99f",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d61b6eb4-6ba2-4ec5-8e1a-00a3340f4161",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "97804fab-01f5-4ea3-9377-4618083f072a",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "cf631d87-6a19-42b8-be3e-51ac293dee3d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "956a03ea-0b45-4040-a5c6-ddba3a096020",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "36d6a615-b27b-4da0-af9d-33e7761dec9d",
				"type": "text/javascript",
				"exec": [
					"wait = (ms) => {",
					"   var start = new Date().getTime();",
					"   var end = start;",
					"   while(end < start + ms) {",
					"     end = new Date().getTime();",
					"  }",
					"};",
					"",
					"pm.collectionVariables.set(\"wait\", wait.toString());",
					"",
					"serverURL = pm.environment.get(\"serverURL\");",
					"",
					"hostNamaeStartIndex =  serverURL.indexOf(\"//\");",
					"hostNamaeEndIndex =  serverURL.indexOf(\":\", hostNamaeStartIndex);",
					"hostName = serverURL.substring(hostNamaeStartIndex + 2, hostNamaeEndIndex);",
					"",
					"pm.collectionVariables.set(\"origin\", hostName);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "31363f84-ae3e-465e-b2f0-f0407ec01333",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "aafd3156-c790-4cbb-9e6b-609c236a52fc",
			"key": "endpointName",
			"value": "endpoint-570"
		},
		{
			"id": "3f461a5f-7ee1-41f6-94ac-042c3d4669f9",
			"key": "environmentName",
			"value": "environment-886"
		},
		{
			"id": "e2b1014b-0728-4acf-bd5f-4f3c2b5d99f2",
			"key": "origin",
			"value": "localhost"
		},
		{
			"id": "d1a0ebf3-846d-44c0-a5f2-0ba5e168166b",
			"key": "environmentId",
			"value": "35f2da2c-b9c4-403a-84e7-5b3815db6605"
		},
		{
			"id": "506a8a9f-93b0-4b5f-b31e-f68dd05f2a6a",
			"key": "endpintId",
			"value": "8e1b0743-54ac-4912-b64e-a9f4717eb1b7"
		},
		{
			"id": "1d739235-918c-408d-8e5a-752bc7e66269",
			"key": "receiverName",
			"value": "receiverName-729"
		},
		{
			"id": "686ef994-7957-49ac-96f0-f277cf202b00",
			"key": "token",
			"value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhcGkxYzkyNjYwNC0xYTRjLTQ4MGEtYTkzZC05ZjRhMmUwNGMxYjciLCJ4bW9kIjoxNjAwNzkwMjc1MDAwLCJuYmYiOjE2MDA3OTAyNzUsImlzcyI6IjY4ZGMyODUxMjciLCJsYWJlbCI6InRlc3RpbmciLCJleHAiOjE2OTUzNjE2NDAsImlhdCI6MTYwMDc5MDI3NSwianRpIjoiYjBkYzM3ZGUtZGI4NC00MmI5LWFkOGQtYWM2YzhhZjI2NTEzIn0.FpL3RB5a9JwvpDGyn6vWpcgkwRVHS14SHWyzl-04vWI"
		},
		{
			"id": "6bb75c2a-e385-426d-939a-f09ff3a4e17a",
			"key": "wait",
			"value": "(ms) => {\n   var start = new Date().getTime();\n   var end = start;\n   while(end < start + ms) {\n     end = new Date().getTime();\n  }\n}"
		}
	],
	"protocolProfileBehavior": {}
}